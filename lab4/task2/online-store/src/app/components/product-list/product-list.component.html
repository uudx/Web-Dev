<div class="product-list-container">
  <header class="page-header">
    <div class="header-content">
      <div class="logo-section">
        <h1 class="page-title">Online Store</h1>
        <p class="page-subtitle">–¢–æ–≤–∞—Ä—ã —Å Kaspi.kz</p>
      </div>
      <div class="stats-section" *ngIf="!isLoading">
        <div class="stat-item">
          <span class="stat-value">{{ totalProducts }}</span>
          <span class="stat-label">–¢–æ–≤–∞—Ä–æ–≤</span>
        </div>
        <div class="stat-item">
          <span class="stat-value">{{ averageRating }}</span>
          <span class="stat-label">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥</span>
        </div>
        <div class="stat-item">
          <span class="stat-value">{{ categories.length }}</span>
          <span class="stat-label">–ö–∞—Ç–µ–≥–æ—Ä–∏–π</span>
        </div>
      </div>
    </div>
  </header>

  <section class="controls-section" *ngIf="!isLoading">
    <div class="search-container">
      <div class="search-input-wrapper">
        <span class="search-icon">üîç</span>
        <input 
          type="text" 
          class="search-input" 
          placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤..."
          [value]="searchQuery"
          (input)="onSearch($event)"
        >
        <button 
          class="clear-search-btn" 
          *ngIf="searchQuery"
          (click)="clearSearch()"
          type="button"
        >
          √ó
        </button>
      </div>
    </div>

    <div class="filters-row">
      <div class="filter-group">
        <label class="filter-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
        <select 
          class="filter-select" 
          [value]="currentCategory"
          (change)="onCategoryChange($any($event.target).value)"
        >
          <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ({{ totalProducts }})</option>
          <option 
            *ngFor="let category of categories" 
            [value]="category"
          >
            {{ category }} ({{ getCategoryCount(category) }})
          </option>
        </select>
      </div>
      <div class="filter-group">
        <label class="filter-label">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
        <select 
          class="filter-select" 
          [value]="currentSort"
          (change)="onSortChange($any($event.target).value)"
        >
          <option value="default">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>
          <option value="price-asc">–¶–µ–Ω–∞: –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é</option>
          <option value="price-desc">–¶–µ–Ω–∞: –ø–æ —É–±—ã–≤–∞–Ω–∏—é</option>
          <option value="rating-desc">–†–µ–π—Ç–∏–Ω–≥: –≤—ã—Å–æ–∫–∏–π ‚Üí –Ω–∏–∑–∫–∏–π</option>
          <option value="name-asc">–ù–∞–∑–≤–∞–Ω–∏–µ: –ê ‚Üí –Ø</option>
        </select>
      </div>
      <div class="view-toggle">
        <button 
          class="view-btn" 
          [class.active]="viewMode === 'grid'"
          (click)="viewMode = 'grid'"
          type="button"
          title="–°–µ—Ç–∫–∞"
        >
          ‚äû
        </button>
        <button 
          class="view-btn" 
          [class.active]="viewMode === 'list'"
          (click)="viewMode = 'list'"
          type="button"
          title="–°–ø–∏—Å–æ–∫"
        >
          ‚ò∞
        </button>
      </div>
      <button 
        class="reset-filters-btn" 
        *ngIf="hasActiveFilters"
        (click)="resetFilters()"
        type="button"
      >
        <span>‚Ü∫</span>
        <span>–°–±—Ä–æ—Å–∏—Ç—å</span>
      </button>
    </div>
    <div class="active-filters" *ngIf="hasActiveFilters">
      <span class="active-filters-label">–ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:</span>
      <div class="filter-tags">
        <span class="filter-tag" *ngIf="searchQuery">
          –ü–æ–∏—Å–∫: "{{ searchQuery }}"
          <button (click)="clearSearch()" type="button">√ó</button>
        </span>
        <span class="filter-tag" *ngIf="currentCategory !== 'all'">
          –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {{ currentCategory }}
          <button (click)="onCategoryChange('all')" type="button">√ó</button>
        </span>
        <span class="filter-tag" *ngIf="currentSort !== 'default'">
          –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: {{ getSortLabel(currentSort) }}
          <button (click)="onSortChange('default')" type="button">√ó</button>
        </span>
      </div>
    </div>
  </section>
  <div class="loading-state" *ngIf="isLoading">
    <div class="loading-spinner"></div>
    <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤...</p>
  </div>
  <div class="results-info" *ngIf="!isLoading">
    <p *ngIf="filteredCount === totalProducts">
      –ü–æ–∫–∞–∑–∞–Ω–æ –≤—Å–µ {{ totalProducts }} —Ç–æ–≤–∞—Ä–æ–≤
    </p>
    <p *ngIf="filteredCount !== totalProducts">
      –ü–æ–∫–∞–∑–∞–Ω–æ {{ filteredCount }} –∏–∑ {{ totalProducts }} —Ç–æ–≤–∞—Ä–æ–≤
    </p>
  </div>
  <div 
    class="products-grid" 
    [class.grid-view]="viewMode === 'grid'"
    [class.list-view]="viewMode === 'list'"
    *ngIf="!isLoading && filteredProducts.length > 0"
  >
    <app-product-card 
      *ngFor="let product of filteredProducts; let i = index"
      [product]="product"
      [style.animation-delay]="i * 0.05 + 's'"
      class="fade-in"
    ></app-product-card>
  </div>
  <div class="empty-state" *ngIf="!isLoading && filteredProducts.length === 0">
    <div class="empty-icon">üîç</div>
    <h3>–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
    <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã</p>
    <button class="btn btn-primary" (click)="resetFilters()" type="button">
      –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
    </button>
  </div>
  <footer class="page-footer" *ngIf="!isLoading">
    <div class="footer-content">
      <p class="footer-text">
        ¬© 2024 Online Store. –í—Å–µ —Ç–æ–≤–∞—Ä—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã 
        <a href="https://kaspi.kz" target="_blank" rel="noopener noreferrer">Kaspi.kz</a>
      </p>
      <p class="footer-disclaimer">
        –î–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–∞—Ö –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ. –¶–µ–Ω—ã –∏ –Ω–∞–ª–∏—á–∏–µ –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è.
      </p>
    </div>
  </footer>
</div>
